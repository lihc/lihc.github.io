<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hexo">
    <title>Hexo</title>
    <link rel="shortcut icon" href="/images/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/article.css">
    <link rel="stylesheet" href="/css/paginator.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/markdown-body.css">
    <link rel="stylesheet" href="/css/medis.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="/js/show-menus.js"></script>
    <script src="/js/moment-with-locales.js"></script>
    <script src="/js/time-ago.js"></script>
</head>

<body>
    <header>
        <div class="nvabar-container container">
            <h1 class="title">
                <a class="logo" href="/">
                    <img src="/images/favicon.svg">
                </a>
                <a class="site-title" href="/">一条理想鱼</a>
            </h1>
            <nav class="menus" id="navbar">
                <div class="nav-head">
                    <h2>MENU</h2>
                    <a href="#"><ion-icon name="close"></ion-icon></a>
                </div>
                <div class="navbar">
                    <a class="menu " href="/">首页</a>
                    <a class="menu " href="/archives">归档</a>
                    <a class="menu " href="/categories">分类</a>
                    <a class="menu " href="/tags">标签</a>
                    <a class="menu " href="/links">链接</a>
                    <a class="menu " href="/about">关于</a>
                </div>
                <div class="nva-foot"></div>
            </nav>
            <div class="quickly">
                <a class="item github" target="_blank" href="https://github.com/lihaicheng-cn"><ion-icon name="logo-github"></ion-icon></a>
                <a class="item search" href="#"><ion-icon name="search"></ion-icon></a>
                <a class="item media-menus" id="show-menus"><ion-icon name="menu"></ion-icon></a>
            </div>
        </div>
    </header>
    <main>
        <div class="container main-content">
            <div class="content" style="flex: 1;">
                <article class="article card post">
                    <div class="metadata">
                        <span><time dateTime="2025-02-05T03:11:55.000Z">2025-02-05</time>发表</span>
                        <span>6 分钟读完 (大约866个字)</span>
                    </div>
                    <h1 class="post-title">使用 code-server 在任何地方运行 VSCode</h1>
                    <div class="markdown-body">
                        <p>官方网站：<a target="_blank" rel="noopener" href="https://coder.com/docs/code-server">https://coder.com/docs/code-server</a>
                        </p>
                        <p>仓库地址：<a target="_blank" rel="noopener" href="https://github.com/coder/code-server">https://github.com/coder/code-server</a>
                        </p>
                        <h2 id="1-code-server-的亮点">
                            <a href="#1-code-server-的亮点" class="headerlink" title="1. code-server 的亮点"></a>1. code-server 的亮点
                        </h2>
                        <ul>
                            <li>在任何设备上使用一致的开发环境进行编码</li>
                            <li>使用云服务器加速测试、编译、下载等</li>
                            <li>在您外出时节省电池寿命；所有密集型任务都在您的服务器上运行</li>
                        </ul>
                        <h2 id="2-code-server-安装要求">
                            <a href="#2-code-server-安装要求" class="headerlink" title="2. code-server 安装要求"></a>2. code-server 安装要求
                        </h2>
                        <p>需要一台可以运行代码服务器的机器。可以使用已有的物理机器，也可以使用云虚拟机。</p>
                        <p>机器规格至少建议：</p>
                        <ul>
                            <li>1 GB 内存</li>
                            <li>2 个 CPU 核心</li>
                        </ul>
                        <p>机器环境必须启用 WebSockets，因为 code-server 使用 WebSockets 进行浏览器和服务器之间的通信。</p>
                        <p>
                            <strong>TL;DR</strong>：启用 WebSockets 的 Linux 机器，1 GB RAM 和 2 个 vCPU
                        </p>
                        <h2 id="3-code-server-安装入门">
                            <a href="#3-code-server-安装入门" class="headerlink" title="3. code-server 安装入门"></a>3. code-server 安装入门
                        </h2>
                        <p>使用安装脚本，预览安装过程中发生的情况：</p>
                        <figure class="highlight sh">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line">curl -fsSL https://code-server.dev/install.sh | sh -s -- --dry-run</span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <p>要安装，请运行：</p>
                        <figure class="highlight sh">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line">curl -fsSL https://code-server.dev/install.sh | sh</span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <p>完成后，安装脚本将打印出运行和启动代码服务器的说明。</p>
                        <hr>
                        <p>更多安装方法可参考官方文档：<a target="_blank" rel="noopener" href="https://coder.com/docs/code-server#getting-started">https://coder.com/docs/code-server#getting-started</a>
                        </p>
                        <h2 id="4-code-server-设置优化">
                            <a href="#4-code-server-设置优化" class="headerlink" title="4. code-server 设置优化"></a>4. code-server 设置优化
                        </h2>
                        <h3 id="公开代码服务器">
                            <a href="#公开代码服务器" class="headerlink" title="公开代码服务器"></a>公开代码服务器
                        </h3>
                        <p>
                            <strong>切勿</strong>在没有某种形式的身份验证和加密的情况下将代码服务器直接暴露给互联网，否则有人可以通过终端接管您的机器。
                        </p>
                        <p>默认情况下，code-server 使用密码验证。因此，您必须从 code-server 的配置文件中复制密码才能登录。为了避免不必要地暴露自身，code-server 会监听<code>localhost</code>；这种做法对于测试来说很好，但如果您想从另一台机器访问 code-server，它就行不通了。</p>
                        <blockquote>
                            <p>
                                <strong>速率限制</strong>：代码服务器速率限制密码验证尝试次数为每分钟两次加上每小时十二次。
                            </p>
                        </blockquote>
                        <p>FAQ：如何使用哈希加密存储密码？</p>
                        <p>~&#x2F;.config&#x2F;code-server&#x2F;config.yaml</p>
                        <figure class="highlight yaml">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line"><span class="attr">bind-addr:</span> <span class="number">127.0</span><span class="number">.0</span><span class="number">.1</span><span class="string">:8080</span></span><br><span class="line"><span class="attr">auth:</span> <span class="string">password</span></span><br><span class="line"><span class="attr">password:</span> <span class="string">a1b6c8ecc8d61df538397632</span></span><br><span class="line"><span class="attr">cert:</span> <span class="literal">false</span></span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <p>password 为明文密码，可以使用 hashed-password 来加密存储密码：</p>
                        <figure class="highlight bash">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line"><span class="built_in">echo</span> -n <span class="string">&quot;thisismypassword&quot;</span> | npx argon2-cli -e</span><br><span class="line">$argon2i<span class="variable">$v</span>=19<span class="variable">$m</span>=4096,t=3,p=1$wst5qhbgk2lu1ih4dmuxvg<span class="variable">$ls1alrvdiwtvzhwnzcm1dugg</span>+5dto3dt1d5v9xtlws4</span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <p>替换 <code>thisismypassword</code> 为你的实际密码，并<strong>记得将其放在引号内</strong>！例如：</p>
                        <figure class="highlight yaml">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line"><span class="attr">auth:</span> <span class="string">password</span></span><br><span class="line"><span class="attr">hashed-password:</span> <span class="string">&quot;$argon2i$v=19$m=4096,t=3,p=1$wST5QhBgk2lu1ih4DMuxvg$LS1alrVdIWtvZHwnzCM1DUGg+5DTO3Dt1d5v9XtLws4&quot;</span></span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <p>此 <code>hashed-password</code> 字段优先于 <code>password</code>。</p>
                        <p>FAQ：<a target="_blank" rel="noopener" href="https://coder.com/docs/code-server/FAQ#can-i-store-my-password-hashed">https://coder.com/docs/code-server/FAQ#can-i-store-my-password-hashed</a>
                        </p>
                        <h3 id="使用-Nginx-反向代理">
                            <a href="#使用-Nginx-反向代理" class="headerlink" title="使用 Nginx 反向代理"></a>使用 Nginx 反向代理
                        </h3>
                        <figure class="highlight plaintext">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line">server &#123;</span><br><span class="line">    listen       443 ssl;</span><br><span class="line">    server_name  code.domain.com; # 需要替换为自己的域名</span><br><span class="line"></span><br><span class="line">    if ($host != $server_name ) &#123;</span><br><span class="line">        rewrite ^(.*)$ http://$&#123;host&#125;$1 permanent;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    ssl_certificate      /etc/letsencrypt/live/domain.com/fullchain.pem; # 需要替换</span><br><span class="line">    ssl_certificate_key  /etc/letsencrypt/live/domain.com/privkey.pem; # 需要替换</span><br><span class="line"></span><br><span class="line">    ssl_session_cache    shared:SSL:1m;</span><br><span class="line">    ssl_session_timeout  5m;</span><br><span class="line"></span><br><span class="line">    ssl_ciphers  HIGH:!aNULL:!MD5;</span><br><span class="line">    ssl_prefer_server_ciphers  on;</span><br><span class="line"></span><br><span class="line">    access_log   /var/log/nginx/code-server.access.log  main;</span><br><span class="line"></span><br><span class="line">    location / &#123;</span><br><span class="line">        proxy_pass http://localhost:8080/;</span><br><span class="line">        proxy_set_header Host $http_host;</span><br><span class="line">        proxy_set_header Upgrade $http_upgrade;</span><br><span class="line">        proxy_set_header Connection upgrade;</span><br><span class="line">        proxy_set_header Accept-Encoding gzip;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>



                        <h2 id="5-推荐的-VSCode-插件">
                            <a href="#5-推荐的-VSCode-插件" class="headerlink" title="5. 推荐的 VSCode 插件"></a>5. 推荐的 VSCode 插件
                        </h2>
                        <p>Extensions for Visual Studio Code：<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/">https://marketplace.visualstudio.com/</a>
                        </p>
                        <p>Docker：<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker">https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-docker</a>
                        </p>
                        <p>Python：<a target="_blank" rel="noopener" href="https://marketplace.visualstudio.com/items?itemName=ms-python.python">https://marketplace.visualstudio.com/items?itemName=ms-python.python</a>
                        </p>
                        <p>推荐的用户设置 <code>~/.local/share/code-server/User/settings.json</code>：</p>
                        <figure class="highlight json">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line"><span class="punctuation">&#123;</span></span><br><span class="line">    <span class="attr">&quot;editor.mouseWheelZoom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;explorer.compactFolders&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;files.autoSave&quot;</span><span class="punctuation">:</span> <span class="string">&quot;off&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;remote.autoForwardPorts&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">false</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;terminal.integrated.cwd&quot;</span><span class="punctuation">:</span> <span class="string">&quot;/root&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;terminal.integrated.defaultProfile.linux&quot;</span><span class="punctuation">:</span> <span class="string">&quot;bash&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;terminal.integrated.mouseWheelZoom&quot;</span><span class="punctuation">:</span> <span class="literal"><span class="keyword">true</span></span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;window.menuBarVisibility&quot;</span><span class="punctuation">:</span> <span class="string">&quot;classic&quot;</span><span class="punctuation">,</span></span><br><span class="line">    <span class="attr">&quot;workbench.colorTheme&quot;</span><span class="punctuation">:</span> <span class="string">&quot;Default Dark Modern&quot;</span></span><br><span class="line"><span class="punctuation">&#125;</span></span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                    </div>
                    <div class="licensing">
                        <div class="licensing-title">
                            <p>使用 code-server 在任何地方运行 VSCode</p>
                            <a href="https://www.lihaicheng.com/page/code-server/">https://www.lihaicheng.com/page/code-server/</a>
                        </div>
                        <div class="licensing-meta">
                            <div class="author">
                                <h6>作者</h6>
                                <p>白羊</p>
                            </div>
                            <div class="create-time">
                                <h6>发布时间</h6>
                                <p>2025-12-12</p>
                            </div>
                            <div class="update-time">
                                <h6>更新时间</h6>
                                <p>2025-12-12</p>
                            </div>
                            <div class="license">
                                <h6>许可协议</h6>
                                <p>
                                    <a target="_blank" rel="noopener" href="https://creativecommons.org/" title="Creative Commons">
                                        <img src="/images/cc.svg" alt="">
                                    </a>
                                    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by/4.0/" title="Attribution">
                                        <img src="/images/by.svg" alt="">
                                    </a>
                                    <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc/4.0/" title="Noncommercial">
                                        <img src="/images/nc.svg" alt="">
                                    </a>
                                </p>
                            </div>
                        </div>
                    </div>
                </article>
            </div>
            <div class="sidebar">
                <div class="card profile">
                    <img src="https://cravatar.cn/avatar/d0e94b8b1f46baf4397bcfadbc231ad2?s=128" style="clip-path:circle(50% at center);" onerror="this.style=&#039;&#039;">
                    <h2 class="author">白羊</h2>
                    <ul class="info">
                        <li>
                            <span>帖子</span>
                            <a href="/archives">2</a>
                        </li>
                        <li>
                            <span>分类</span>
                            <a href="/categories">0</a>
                        </li>
                        <li>
                            <span>标签</span>
                            <a href="/tags">2</a>
                        </li>
                    </ul>
                    <a class="follow-me" href="/rss">Forrow Me</a>
                    <div class="social">
                        <a target="_blank" rel="noopener"><ion-icon name="logo-github"></ion-icon></a>
                        <a target="_blank" rel="noopener"><ion-icon name="logo-twitter"></ion-icon></a>
                        <a target="_blank" rel="noopener" href="https://www.lihaicheng.com"><ion-icon name="logo-rss"></ion-icon></a>
                        <a href="mailto:undefined"><ion-icon name="mail"></ion-icon></a>
                    </div>
                </div>
                <div class="card side-archives">
                    <h3 class="side-title">归档</h3>
                    <div>
                        <a class="archive-link" href="/archives/2025/02/">2月 2025<span class="archive-count">1</span>
                        </a>
                        <a class="archive-link" href="/archives/2025/01/">1月 2025<span class="archive-count">1</span>
                        </a>
                    </div>
                </div>
                <div class="card side-categories">
                    <h3 class="side-title">分类</h3>
                    <div></div>
                </div>
                <div class="card side-tags">
                    <h3 class="side-title">标签</h3>
                    <div>
                        <a class="tag-link" href="/tags/VSCode/" rel="tag">VSCode<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/code-server/" rel="tag">code-server<span class="tag-count">1</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer></footer>
</body>

</html>