<!doctype html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="Hexo">
    <title>Hexo</title>
    <link rel="shortcut icon" href="/images/favicon.svg" type="image/x-icon">
    <link rel="stylesheet" href="/css/normalize.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/header.css">
    <link rel="stylesheet" href="/css/footer.css">
    <link rel="stylesheet" href="/css/main.css">
    <link rel="stylesheet" href="/css/article.css">
    <link rel="stylesheet" href="/css/paginator.css">
    <link rel="stylesheet" href="/css/sidebar.css">
    <link rel="stylesheet" href="/css/markdown-body.css">
    <link rel="stylesheet" href="/css/medis.css">
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>
    <script src="/js/show-menus.js"></script>
    <script src="/js/moment-with-locales.js"></script>
    <script src="/js/time-ago.js"></script>
</head>

<body>
    <header>
        <div class="nvabar-container container">
            <h1 class="title">
                <a class="logo" href="/">
                    <img src="/images/favicon.svg">
                </a>
                <a class="site-title" href="/">一条理想鱼</a>
            </h1>
            <nav class="menus" id="navbar">
                <div class="nav-head">
                    <h2>MENU</h2>
                    <a href="#"><ion-icon name="close"></ion-icon></a>
                </div>
                <div class="navbar">
                    <a class="menu " href="/">Home</a>
                    <a class="menu " href="/archives">Archives</a>
                    <a class="menu " href="/categories">Categories</a>
                    <a class="menu " href="/tags">Tags</a>
                    <a class="menu " href="/links">Links</a>
                    <a class="menu " href="/about">About</a>
                </div>
                <div class="nva-foot"></div>
            </nav>
            <div class="quickly">
                <a class="item github" target="_blank" href="https://github.com/lihaicheng-cn"><ion-icon name="logo-github"></ion-icon></a>
                <a class="item search" href="#"><ion-icon name="search"></ion-icon></a>
                <a class="item media-menus" id="show-menus"><ion-icon name="menu"></ion-icon></a>
            </div>
        </div>
    </header>
    <main>
        <div class="container main-content">
            <div class="content" style="flex: 1;">
                <article class="article card post">
                    <div class="metadata">
                        <span><time dateTime="2025-01-24T07:43:14.000Z">2025-01-24</time>发表</span>
                        <a href="/categories/Linux/">Linux</a>
                        <span>12 分钟读完 (大约1772个字)</span>
                    </div>
                    <h1 class="post-title">Markdown</h1>
                    <div class="markdown-body">
                        <h1 id="Docker-容器资源管理指南-🐳">
                            <a href="#Docker-容器资源管理指南-🐳" class="headerlink" title="Docker 容器资源管理指南 🐳"></a>Docker 容器资源管理指南 🐳
                        </h1>
                        <h2 id="资源限制参数详解">
                            <a href="#资源限制参数详解" class="headerlink" title="资源限制参数详解"></a>资源限制参数详解
                        </h2>
                        <h3 id="CPU-相关参数">
                            <a href="#CPU-相关参数" class="headerlink" title="CPU 相关参数"></a>CPU 相关参数
                        </h3>
                        <ul>
                            <li>
                                <p>
                                    <strong>cpuset-cpus</strong>: 允许你精确地控制容器可以运行在哪些CPU核心上。例如，设置为”0-2,4”表示容器只能使用CPU核心0、1、2和4。这对于需要严格CPU隔离的应用特别有用，比如数据库服务器或实时计算系统。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>cpu-shares</strong>: 设置容器在CPU资源竞争时的相对权重值，默认为1024。较高的值意味着在CPU资源紧张时获得更多的CPU时间片。这个设置不会限制容器的CPU使用率上限，而是在多个容器竞争CPU资源时起作用。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>cpu-period</strong>: 指定CPU CFS（完全公平调度器）周期的时长，取值范围为1ms至1s（1000-1000000微秒）。这个参数通常与cpu-quota一起使用，用于精确控制容器的CPU使用率。
                                </p>
                            </li>
                        </ul>
                        <h3 id="内存相关参数">
                            <a href="#内存相关参数" class="headerlink" title="内存相关参数"></a>内存相关参数
                        </h3>
                        <ul>
                            <li>
                                <p>
                                    <strong>memory-swap</strong>: 设置容器可以使用的交换空间总量。例如，如果设置memory&#x3D;1g，memory-swap&#x3D;2g，则表示容器可以使用1G物理内存和1G交换空间。这个参数对于防止容器过度使用系统交换空间非常重要，特别是在多容器环境中。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>memory-reservation</strong>: 设置一个软性的内存限制，当系统内存紧张时会触发。这个值应该设置低于memory限制，作为一个预警机制。例如，如果您的应用正常运行需要1GB内存，可以设置reservation为800MB，这样系统在内存压力大时会优先释放超出reservation的内存。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>kernel-memory</strong>: 限制容器可以使用的内核内存量，这包括TCP缓冲区等系统资源。需要注意的是，设置不当可能会导致容器内的网络栈出现问题，建议在充分测试后再在生产环境使用。
                                </p>
                            </li>
                        </ul>
                        <h3 id="存储相关参数">
                            <a href="#存储相关参数" class="headerlink" title="存储相关参数"></a>存储相关参数
                        </h3>
                        <ul>
                            <li>
                                <p>
                                    <strong>device-read-bps</strong>: 限制容器对特定设备的读取速率。例如，设置为&#x2F;dev&#x2F;sda:1mb表示限制从&#x2F;dev&#x2F;sda读取的速率最大为1MB&#x2F;s。这对于确保多个容器公平共享存储资源非常重要，特别是在IO密集型应用场景中。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>device-write-iops</strong>: 限制容器对特定设备的写入IOPS（每秒IO操作数）。比如设置为&#x2F;dev&#x2F;sda:100表示限制对&#x2F;dev&#x2F;sda的写入操作不能超过每秒100次。这个参数对于保护存储系统免受过度IO压力特别有用。
                                </p>
                            </li>
                        </ul>
                        <h3 id="网络相关参数">
                            <a href="#网络相关参数" class="headerlink" title="网络相关参数"></a>网络相关参数
                        </h3>
                        <ul>
                            <li>
                                <p>
                                    <strong>network-rx-bytes</strong>: 控制容器网络接收的带宽限制。例如，设置为10mb表示容器最大只能以10MB&#x2F;s的速率接收数据。这对于防止单个容器占用过多网络带宽，影响其他容器或宿主机的网络性能非常重要。
                                </p>
                            </li>
                            <li>
                                <p>
                                    <strong>network-tx-bytes</strong>: 限制容器的网络发送带宽。可以设置具体的数值如5mb，确保容器不会发送超过5MB&#x2F;s的数据。这个限制对于托管服务提供商特别有用，可以防止客户的容器过度使用网络资源。
                                </p>
                            </li>
                        </ul>
                        <h2 id="最佳实践建议">
                            <a href="#最佳实践建议" class="headerlink" title="最佳实践建议"></a>最佳实践建议
                        </h2>
                        <h3 id="资源限制策略">
                            <a href="#资源限制策略" class="headerlink" title="资源限制策略"></a>资源限制策略
                        </h3>
                        <ol>
                            <li>
                                <p>
                                    <strong>开发环境配置</strong>
                                </p>
                                <ul>
                                    <li>建议给予较为宽松的资源限制，以便开发人员能够快速进行测试和调试</li>
                                    <li>CPU限制可以设置为宿主机核心数的50%以上</li>
                                    <li>内存限制应该至少预留应用峰值使用量的1.5倍</li>
                                    <li>存储限制需要考虑日志文件和临时文件的空间需求</li>
                                </ul>
                            </li>
                            <li>
                                <p>
                                    <strong>生产环境配置</strong>
                                </p>
                                <ul>
                                    <li>必须严格设置资源限制，防止单个容器影响整个系统的稳定性</li>
                                    <li>建议使用docker-compose或kubernetes来统一管理资源限制</li>
                                    <li>关键应用应该设置资源预留，确保基本资源可用性</li>
                                    <li>定期监控和调整资源限制，适应应用实际需求</li>
                                </ul>
                            </li>
                            <li>
                                <p>
                                    <strong>监控和告警设置</strong>
                                </p>
                                <ul>
                                    <li>配置资源使用率的监控阈值，例如：<ul>
                                            <li>CPU使用率超过80%持续5分钟触发告警</li>
                                            <li>内存使用率超过90%立即触发告警</li>
                                            <li>磁盘IO等待时间超过100ms触发告警</li>
                                        </ul>
                                    </li>
                                    <li>建立资源使用趋势分析，提前预测资源瓶颈</li>
                                    <li>设置自动扩缩容策略，响应负载变化</li>
                                </ul>
                            </li>
                        </ol>
                        <h1 id="2024年中国东部城市旅行指南-🌏">
                            <a href="#2024年中国东部城市旅行指南-🌏" class="headerlink" title="2024年中国东部城市旅行指南 🌏"></a>2024年中国东部城市旅行指南 🌏
                        </h1>
                        <h2 id="行程规划与准备">
                            <a href="#行程规划与准备" class="headerlink" title="行程规划与准备"></a>行程规划与准备
                        </h2>
                        <h3 id="出行前准备">
                            <a href="#出行前准备" class="headerlink" title="出行前准备"></a>出行前准备
                        </h3>
                        <h4 id="证件清单">
                            <a href="#证件清单" class="headerlink" title="证件清单"></a>证件清单
                        </h4>
                        <h5 id="必备证件">
                            <a href="#必备证件" class="headerlink" title="必备证件"></a>必备证件
                        </h5>
                        <h6 id="次要证件">
                            <a href="#次要证件" class="headerlink" title="次要证件"></a>次要证件
                        </h6>
                        <ol>
                            <li>
                                <strong>重要证件</strong>
                                <ul>
                                    <li>身份证</li>
                                    <li>护照</li>
                                    <li>银行卡</li>
                                </ul>
                            </li>
                            <li>
                                <em>次要证件</em>
                                <ul>
                                    <li>学生证</li>
                                    <li>工作证</li>
                                </ul>
                            </li>
                        </ol>
                        <h3 id="行李清单">
                            <a href="#行李清单" class="headerlink" title="行李清单"></a>行李清单
                        </h3>
                        <ul>
                            <li>
                                <input checked="" disabled="" type="checkbox"> 充电器和充电宝
                            </li>
                            <li>
                                <input disabled="" type="checkbox"> 换洗衣物
                            </li>
                            <li>
                                <input checked="" disabled="" type="checkbox"> 洗漱用品
                            </li>
                            <li>
                                <input disabled="" type="checkbox"> 常用药品
                            </li>
                        </ul>
                        <h2 id="城市游记-🌆">
                            <a href="#城市游记-🌆" class="headerlink" title="城市游记 🌆"></a>城市游记 🌆
                        </h2>
                        <h3 id="上海游记">
                            <a href="#上海游记" class="headerlink" title="上海游记"></a>上海游记
                        </h3>
                        <p>上海，这座充满现代感与历史感交织的国际化大都市，给我留下了深刻的印象。<strong>外滩的夜景</strong>璀璨夺目，_老城区的风情_令人陶醉。</p>
                        <h4 id="必访景点">
                            <a href="#必访景点" class="headerlink" title="必访景点"></a>必访景点
                        </h4>
                        <ol>
                            <li>外滩<ul>
                                    <li>和平饭店</li>
                                    <li>外滩万国建筑群</li>
                                    <li>黄浦江夜景</li>
                                </ul>
                            </li>
                            <li>南京路步行街<ul>
                                    <li>老字号商铺</li>
                                    <li>特色小吃</li>
                                </ul>
                            </li>
                            <li>豫园商城<ul>
                                    <li>九曲桥</li>
                                    <li>湖心亭</li>
                                </ul>
                            </li>
                        </ol>
                        <h4 id="美食推荐">
                            <a href="#美食推荐" class="headerlink" title="美食推荐"></a>美食推荐
                        </h4>
                        <ul>
                            <li>南翔小笼包<ul>
                                    <li>价格：￥30&#x2F;笼</li>
                                    <li>地址：<code>豫园商城内</code>
                                    </li>
                                </ul>
                            </li>
                            <li>生煎包<ul>
                                    <li>价格：￥15&#x2F;份</li>
                                    <li>推荐店铺：<a target="_blank" rel="noopener" href="http://www.dhc.com/">大壶春</a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                        <h3 id="杭州游记">
                            <a href="#杭州游记" class="headerlink" title="杭州游记"></a>杭州游记
                        </h3>
                        <blockquote>
                            <h3 id="西湖印象">
                                <a href="#西湖印象" class="headerlink" title="西湖印象"></a>西湖印象
                            </h3>
                            <p>西湖十景确实名不虚传：</p>
                            <ol>
                                <li>断桥残雪</li>
                                <li>平湖秋月</li>
                                <li>苏堤春晓</li>
                            </ol>
                            <h4 id="特色体验">
                                <a href="#特色体验" class="headerlink" title="特色体验"></a>特色体验
                            </h4>
                            <ul>
                                <li>划船游湖</li>
                                <li>品茗龙井</li>
                                <li>游览寺庙</li>
                            </ul>
                            <p>
                                <em>漫步在西湖边，感受着杭州的诗意与温婉。</em>
                            </p>
                        </blockquote>
                        <h3 id="苏州游记">
                            <a href="#苏州游记" class="headerlink" title="苏州游记"></a>苏州游记
                        </h3>
                        <p>
                            <code>苏州，一座来了就不想离开的城市。</code>
                        </p>
                        <p>
                            <em>
                                <strong>园林景观</strong>
                            </em>
                        </p>
                        <figure class="highlight python">
                            <table>
                                <tr>
                                    <td class="gutter">
                                        <pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre>
                                    </td>
                                    <td class="code">
                                        <pre><span class="line">gardens = &#123;</span><br><span class="line">    <span class="string">&quot;拙政园&quot;</span>: <span class="string">&quot;最大的古典园林&quot;</span>,</span><br><span class="line">    <span class="string">&quot;狮子林&quot;</span>: <span class="string">&quot;禅意园林代表&quot;</span>,</span><br><span class="line">    <span class="string">&quot;网师园&quot;</span>: <span class="string">&quot;江南园林精品&quot;</span></span><br><span class="line">&#125;</span><br></pre>
                                    </td>
                                </tr>
                            </table>
                        </figure>

                        <h1 id="我的旅行笔记-🌍">
                            <a href="#我的旅行笔记-🌍" class="headerlink" title="我的旅行笔记 🌍"></a>我的旅行笔记 🌍
                        </h1>
                        <h2 id="行程概览">
                            <a href="#行程概览" class="headerlink" title="行程概览"></a>行程概览
                        </h2>
                        <p>这次旅行从 <strong>北京</strong> 出发，经过了以下城市：</p>
                        <ol>
                            <li>上海</li>
                            <li>杭州</li>
                            <li>苏州</li>
                        </ol>
                        <h3 id="行程亮点">
                            <a href="#行程亮点" class="headerlink" title="行程亮点"></a>行程亮点
                        </h3>
                        <ul>
                            <li>参观了著名的<a target="_blank" rel="noopener" href="https://www.yueyar.com/">豫园</a>
                            </li>
                            <li>品尝了杭州特色的 <em>龙井虾仁</em>
                            </li>
                            <li>在苏州古典园林散步</li>
                        </ul>
                        <h2 id="美食记录-🍜">
                            <a href="#美食记录-🍜" class="headerlink" title="美食记录 🍜"></a>美食记录 🍜
                        </h2>
                        <table>
                            <thead>
                                <tr>
                                    <th>城市</th>
                                    <th>美食</th>
                                    <th>评分</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>上海</td>
                                    <td>生煎包</td>
                                    <td>⭐⭐⭐⭐⭐</td>
                                </tr>
                                <tr>
                                    <td>杭州</td>
                                    <td>西湖醋鱼</td>
                                    <td>⭐⭐⭐⭐</td>
                                </tr>
                                <tr>
                                    <td>苏州</td>
                                    <td>松鼠桂鱼</td>
                                    <td>⭐⭐⭐⭐</td>
                                </tr>
                            </tbody>
                        </table>
                        <h3 id="特别推荐">
                            <a href="#特别推荐" class="headerlink" title="特别推荐"></a>特别推荐
                        </h3>
                        <blockquote>
                            <p>杭州西湖边的早茶体验是此行最难忘的记忆。
                                <br>清晨的雾气中，品着龙井茶，望着西湖，别有一番韵味。
                            </p>
                        </blockquote>
                        <h2 id="花费统计-💰">
                            <a href="#花费统计-💰" class="headerlink" title="花费统计 💰"></a>花费统计 💰
                        </h2>
                        <p>使用以下公式计算人均成本：</p>
                        <p>$$ 人均成本 &#x3D; \frac{总支出}{人数} &#x3D; \frac{5000}{2} &#x3D; 2500 $$</p>
                        <h2 id="拍摄装备">
                            <a href="#拍摄装备" class="headerlink" title="拍摄装备"></a>拍摄装备
                        </h2>
                        <h3 id="主要设备">
                            <a href="#主要设备" class="headerlink" title="主要设备"></a>主要设备
                        </h3>
                        <ul>
                            <li>Sony A7M4</li>
                            <li>24-70mm f&#x2F;2.8 镜头</li>
                        </ul>
                        <h3 id="后期软件">
                            <a href="#后期软件" class="headerlink" title="后期软件"></a>后期软件
                        </h3>
                        <ol>
                            <li>
                                <del>Lightroom</del>
                            </li>
                            <li>
                                <strong>Capture One</strong>
                            </li>
                            <li>
                                <em>
                                    <strong>Photoshop</strong>
                                </em>
                            </li>
                        </ol>
                        <h2 id="实用链接">
                            <a href="#实用链接" class="headerlink" title="实用链接"></a>实用链接
                        </h2>
                        <ul>
                            <li>
                                <a target="_blank" rel="noopener" href="https://www.12306.cn/">铁路订票</a>
                            </li>
                            <li>
                                <a target="_blank" rel="noopener" href="https://www.ctrip.com/">携程旅行</a>
                            </li>
                            <li>
                                <a target="_blank" rel="noopener" href="https://www.dianping.com/">大众点评</a>
                            </li>
                        </ul>
                        <h2 id="天气情况">
                            <a href="#天气情况" class="headerlink" title="天气情况"></a>天气情况
                        </h2>
                        <p>天气状况：</p>
                        <pre><code class="language-python">weather = &#123;
    &quot;上海&quot;: &quot;晴朗 26℃&quot;,
    &quot;杭州&quot;: &quot;多云 24℃&quot;,
    &quot;苏州&quot;: &quot;小雨 23℃&quot;
&#125;
</code></pre>
                    </div>
                </article>
            </div>
            <div class="sidebar">
                <div class="card profile">
                    <img src="https://cravatar.cn/avatar/d0e94b8b1f46baf4397bcfadbc231ad2?s=128" style="clip-path:circle(50% at center);" onerror="this.style=&#039;&#039;">
                    <h2 class="author">白羊</h2>
                    <ul class="info">
                        <li>
                            <span>POSTS</span>
                            <a href="/archives">23</a>
                        </li>
                        <li>
                            <span>CATEGORIES</span>
                            <a href="/categories">7</a>
                        </li>
                        <li>
                            <span>TAGS</span>
                            <a href="/tags">7</a>
                        </li>
                    </ul>
                    <a class="follow-me" href="/rss">Forrow Me</a>
                    <div class="social">
                        <a target="_blank" rel="noopener"><ion-icon name="logo-github"></ion-icon></a>
                        <a target="_blank" rel="noopener"><ion-icon name="logo-twitter"></ion-icon></a>
                        <a target="_blank" rel="noopener" href="https://www.lihaicheng.com"><ion-icon name="logo-rss"></ion-icon></a>
                        <a href="mailto:undefined"><ion-icon name="mail"></ion-icon></a>
                    </div>
                </div>
                <div class="card side-archives">
                    <h3 class="side-title">ARCHIVES</h3>
                    <div>
                        <a class="archive-link" href="/archives/2026/01/">Jan 2026<span class="archive-count">1</span>
                        </a>
                        <a class="archive-link" href="/archives/2025/01/">Jan 2025<span class="archive-count">10</span>
                        </a>
                        <a class="archive-link" href="/archives/2024/11/">Nov 2024<span class="archive-count">2</span>
                        </a>
                        <a class="archive-link" href="/archives/2024/01/">Jan 2024<span class="archive-count">10</span>
                        </a>
                    </div>
                </div>
                <div class="card side-categories">
                    <h3 class="side-title">CATEGORIES</h3>
                    <div>
                        <a class="category-link" href="/categories/Hello/">Hello<span class="category-count">1</span>
                        </a>
                        <a class="category-link" href="/categories/Linux/">Linux<span class="category-count">2</span>
                        </a>
                        <a class="category-link" href="/categories/%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB/">一级分类<span class="category-count">1</span>
                        </a>
                        <a class="category-link" href="/categories/%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB/">二级分类<span class="category-count">1</span>
                        </a>
                        <a class="category-link" href="/categories/%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%B8%89%E7%BA%A7%E5%88%86%E7%B1%BB/">三级分类<span class="category-count">1</span>
                        </a>
                        <a class="category-link" href="/categories/%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%B8%89%E7%BA%A7%E5%88%86%E7%B1%BB/%E5%9B%9B%E7%BA%A7%E5%88%86%E7%B1%BB/">四级分类<span class="category-count">1</span>
                        </a>
                        <a class="category-link" href="/categories/%E4%B8%80%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%BA%8C%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%B8%89%E7%BA%A7%E5%88%86%E7%B1%BB/%E5%9B%9B%E7%BA%A7%E5%88%86%E7%B1%BB/%E4%BA%94%E7%BA%A7%E5%88%86%E7%B1%BB/">五级分类<span class="category-count">1</span>
                        </a>
                    </div>
                </div>
                <div class="card side-tags">
                    <h3 class="side-title">TAGS</h3>
                    <div>
                        <a class="tag-link" href="/tags/Cgroup/" rel="tag">Cgroup<span class="tag-count">2</span>
                        </a>
                        <a class="tag-link" href="/tags/Git/" rel="tag">Git<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/Hexo/" rel="tag">Hexo<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/Kubernetes/" rel="tag">Kubernetes<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/NodeJs/" rel="tag">NodeJs<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/World/" rel="tag">World<span class="tag-count">1</span>
                        </a>
                        <a class="tag-link" href="/tags/%E5%AE%B9%E5%99%A8/" rel="tag">容器<span class="tag-count">2</span>
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer></footer>
</body>

</html>